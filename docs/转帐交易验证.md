# 转帐交易验证

过滤转帐交易有两种方式，一种是通过mongodb的filter-on过滤器，一种是通过event emit机制。

## mongodb过滤器
// TODO

## 使用event-emit机制
ultrain链允许在合约中emit事件，对事件感兴趣的，可以向节点注册监听地址(url)，当有事件发生时，节点会向注册的url post消息。

这种验证机制的步骤如下：

1. 创建一个ultrain的帐号。(如果已经有了，可以省略这一步)
2. 给帐号抵押部分资源。(如果帐号已经抵押过资源，可以省略这一步)
3. 编写一个合约，接受utrio.token合约的transfer，在处理transfer事件中emit你想兴趣的事件。
4. 将合约部署到这个帐号。
5. 启动一个http server服务，接收post请求。(这个server服务，需要能够接受长连接)
6. 将http server的url注册到节点，开始接收事件。

这里有一个捕获Event的[demo](../demos/ReceiveEmittedEvent).