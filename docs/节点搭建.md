# 节点搭建

## 搭建挖矿节点
### 矿机系统安装
* 推荐使用超脑定制的ubuntu的iso镜像包安装

* 自行安装保证系统版本为ubuntu(18.0)版本,同时需要安装node.js(v8.10.0)和pm2（使用npm安装）

### 矿机程序安装运行
* 拷贝矿机程序 miner_setup.tar 到 /root目录并解压
```text
cd /root/
tar -xvf miner_setup.tar
```
* 执行安装文件install.sh
```text
cd /root/miner_setup
sh install.sh
```
* 启动矿机程序(检查是否有异常错误信息等)
```text
cd /root/miner_setup
sh start.sh
```
## 搭建mongo节点

### 矿机系统安装

* 推荐使用超脑定制的ubuntu的iso镜像包安装

* 自行安装保证系统版本为ubuntu(18.0)版本,同时需要安装node.js(v8.10.0)和pm2（使用npm安装）

### mongo相关安装和启动

* 拷贝矿机程序 mongo.tar 到 /root目录并解压
```text
cd /root/
tar -xvf mongo.tar
```

* 安装mongo相关依赖包
```text
apt install libcurl3 libcurl-openssl1.0-dev
```
* mongo配置并启动
```text
创建mongo数据和log目录
mkdir -p /mongodb/data && mkdir -p /mongodb/log

启动mongo
/root/mongodb/bin/mongod --dbpath /mongodb/data --logpath /mongodb/log/mongodb.log --fork --bind_ip 0.0.0.0

登陆（mongoshell）
/root/mongodb/bin/mongo

切换数据库
use ultrain

创建账户
db.createUser( {user: "root", pwd: "huobi",roles: [ { role: "readWriteAnyDatabase", db: "admin" }]})

关闭数据库
killall mongod

授权方式启动
/root/mongodb/bin/mongod --auth --dbpath /mongodb/data --logpath /mongodb/log/mongodb.log --fork --bind_ip 0.0.0.0
```

### 矿机程序安装运行
* 拷贝矿机程序 mongo_setup.tar 到 /root目录并解压
```text
cd /root/
tar -xvf mongo_setup.tar
```
* 执行安装文件install.sh
```text
cd /root/mongo_setup
sh install.sh
```
* 启动矿机程序(检查是否有异常错误信息等)
```text
cd /root/mongo_setup
sh start.sh
```


