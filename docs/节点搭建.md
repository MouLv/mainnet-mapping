# 节点搭建

## 搭建挖矿节点
### 矿机系统安装
* 推荐使用超脑定制的ubuntu的iso镜像包安装

* 自行安装保证系统版本为ubuntu(18.0)版本,同时需要安装node.js(v8.10.0)和pm2（使用npm安装）

### 矿机程序安装运行
* 拷贝矿机程序 miner_setup.tar 到用户自己根目录(~/)并解压
```text
cd ~/
tar -xvf miner_setup.tar
```
* 执行安装文件install.sh
```text
cd ~/miner_setup
chmod +x install.sh
./install.sh
```

## 搭建mongo节点

### 矿机系统安装

* 推荐使用超脑定制的ubuntu的iso镜像包安装

* 自行安装保证系统版本为ubuntu(18.0)版本,同时需要安装node.js(v8.10.0)和pm2（使用npm安装）

### mongo相关安装和启动

* 拷贝mongo安装程序 mongo.tar 到用户自己根目录(~/)并解压
```text
cd ~/
tar -xvf mongo.tar
```

* 安装mongo相关依赖包
```text
apt install libcurl3 libcurl-openssl1.0-dev
```
* mongo配置并启动
```text
创建mongo数据和log目录
mkdir -p /mongodb/data && mkdir -p /mongodb/log

启动mongo
~/mongodb/bin/mongod --dbpath /mongodb/data --logpath /mongodb/log/mongodb.log --fork --bind_ip 0.0.0.0

登陆（mongoshell）
~/mongodb/bin/mongo

切换数据库
use ultrain

创建账户
db.createUser( {user: "root", pwd: "huobi",roles: [ { role: "readWriteAnyDatabase", db: "admin" }]})

关闭数据库
killall mongod

授权方式启动
~/mongodb/bin/mongod --auth --dbpath /mongodb/data --logpath /mongodb/log/mongodb.log --fork --bind_ip 0.0.0.0
```

### 矿机程序安装运行
* 拷贝矿机程序 mongo_setup.tar 到用户自己根目录(~/)并解压
```text
cd ~/
tar -xvf mongo_setup.tar
```
* 执行安装文件install.sh
```text
cd ~/mongo_setup
chmod +x install.sh
./install.sh
```



