# 节点搭建

## 搭建挖矿搭建

### 安装程序(miner_setup.tar)下载

* 下载地址
    
    http://40.73.35.128:7656/download/miner_setup/20200107/miner_setup.tar
    
* md5sum： 

    d354d34c22be850cc90ecec4a830855f
    

### 矿机程序安装运行
* 拷贝矿机程序 miner_setup.tar 到用户自己根目录(~/)下并解压
```text
cd ~/
tar -xvf miner_setup.tar
```
* 执行安装文件 install.sh 进行文件分发安装
```text
chmod +x ~/miner_setup/install.sh
~/miner_setup/install.sh
```

* 拷贝矿机专属的配置文件（config.ini)到配置文件目录（该文件中包含隐私信息，请联系对接技术人员获取）

```text
将配置文件拷贝到目标目录
cp /tmp/config.ini /root/.local/share/ultrainio/nodultrain/config/config.ini

拷贝完成后可通过cat命令查看配置文件中用户名等是否正确

cat /root/.local/share/ultrainio/nodultrain/config/config.ini
```

* 启动管家程序（负责日志清理，异常宕机后自动恢复等功能）

pm2 start ~/ultrainmng/src/sideChainService.js && pm2 save && sleep 1 && pm2 startup && sleep 1 && pm2 save 


## 矿机简单运维操作

### 安全重启矿机

* 先关闭nod进程(用kill -2,不要用kill -9)
```text
killall nodultrain
```

* 使用启动脚本启动nod程序即可
```text
~/runultrain-h.sh
```

### 管家相关

* 启动管家

```text
pm2 start ~/ultrainmng/src/sideChainService.js
```

* 重启管家
```text
pm2 restart sideChainService
```

* 关闭管家

```text
pm2 stop sideChainService
```


    
    



